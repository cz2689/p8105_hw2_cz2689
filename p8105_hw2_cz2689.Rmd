---
title: "HW2"
author: "Chaoqun Zhou"
date: 2022-10-04
output: github_document
---
```{r, message = FALSE}
library(tidyverse)
library(readxl)
```


# Problem 1

## Data Import:

```{r, message = FALSE}
raw = read_csv(file = "./data/NYC_Transit_Subway_Entrance_And_Exit_Data.csv") %>% 
    janitor::clean_names() 

p1 = select(raw, line, station_name, station_latitude, station_longitude,
    route1:route11, entrance_type, entry, vending, ada) %>% 
    mutate(entry = recode(entry, YES = "TRUE", NO = "FALSE"),
         entry = as.logical(entry))
```

## Describe the data:
This data set is about NYC Transit data. So far, I have import the data into R. And use `janitor::clean_names()` to clean up variables names. And then I use `select()` to keep the columns that I want. And then I covert the entry variable from character to logical variable. Now, this data set has 19 columns and 1868 rows. It includes variables: `r ls(p1)`.These data looks tidy enough but it can be better. 

## Answer questions:

```{r, message = FALSE}
x = distinct(p1, line, station_name)
```

1. There are 465 distinct stations. 


# Problem 2

## Data Import:

Mr. Trash Wheel:
```{r, message = FALSE}
mrtw = read_excel("./data/Trash Wheel Collection Data.xlsx", 
                  sheet = "Mr. Trash Wheel", range = "A2:N549") %>% 
  janitor::clean_names() %>% 
  mutate(sports_balls = ceiling(sports_balls), 
         sports_balls = as.integer(sports_balls)) %>% 
  mutate(which = "mrtw")
```

Professor Trash Wheel:
```{r, message = FALSE}
proftw = read_excel("./data/Trash Wheel Collection Data.xlsx", 
                    sheet = "Professor Trash Wheel", range = "A2:M96") %>% 
  janitor::clean_names() %>% 
  mutate(which = "proftw")
```

Combine two data set:
```{r, message = FALSE}
tw = merge(mrtw, proftw, all = TRUE)
```

Two Trash Wheels data set were imported. And then combined into one data set called `tw`. The final data set `tw` has `r nrow(tw)`observations. And it includes variable: `r ls(tw)`. The total weight of trash collected by Professor Trash Wheel `r sum(proftw$weight_tons)` tons. The total number of sports balls collected by Mr. Trash Wheel in 2020 is `r sum(mrtw$sports_balls[mrtw$year == 2020])` tons.


# Problem 3

## Data Import and clean:

Clean the data in pols-month:
```{r, message = FALSE}
pm = read_csv(file = "./data/pols-month.csv") %>% 
    janitor::clean_names() %>% 
    separate(mon, c("year", "month", "day"), convert = TRUE) %>% 
    mutate(month = month.name[month]) %>% 
    mutate(president = ifelse(prez_dem == 0, "gop", "dem")) %>% 
    select(-prez_dem, -prez_gop, -day)
```

Clean the data in SNP:
```{r, message = FALSE}
snp = read_csv(file = "./data/snp.csv") %>% 
    janitor::clean_names() %>% 
    separate(date, c("month", "day", "year"), convert = TRUE) %>%
    arrange(month) %>% 
    mutate(month = month.name[month]) %>%
    mutate(year = ifelse(50 <= year & year <= 90, year + 1900, year + 2000)) %>%
    arrange(year) %>% 
    select(-day) %>% 
    relocate(year, month)
```























